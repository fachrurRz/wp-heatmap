<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="1.2.2">
  <bpmn:collaboration id="Collaboration_0f9a87y">
    <bpmn:participant id="Participant_19rfnoj" name="BP" processRef="WF-BP-02-ProductMovingAveragePriceClosing" />
  </bpmn:collaboration>
  <bpmn:process id="WF-BP-02-ProductMovingAveragePriceClosing" name="Create Product Moving Average Price Closing" isExecutable="true">
    <bpmn:ioSpecification>
      <bpmn:dataInput id="Input_3dvto9n" itemSubjectRef="itemDefInput_3dvto9n" name="pinStartTimestamp" />
      <bpmn:dataInput id="Input_034unro" itemSubjectRef="itemDefInput_034unro" name="pinEndTimestamp" />
      <bpmn:inputSet>
        <bpmn:dataInputRefs>Input_3dvto9n</bpmn:dataInputRefs>
        <bpmn:dataInputRefs>Input_034unro</bpmn:dataInputRefs>
      </bpmn:inputSet>
      <bpmn:outputSet />
    </bpmn:ioSpecification>
    <bpmn:laneSet>
      <bpmn:lane id="Lane_0wj1bml" name="BP_Instance">
        <bpmn:flowNodeRef>StartEvent_1</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>UserTask_0fiij9d</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>ExclusiveGateway_0k8u2t9</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>UserTask_03ah2q0</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>UserTask_06zhxaf</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>UserTask_1m1zrgs</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>EndEvent_1uyditj</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>UserTask_1jgek0e</bpmn:flowNodeRef>
      </bpmn:lane>
    </bpmn:laneSet>
    <bpmn:dataObject id="ProcessVar_014s7ib" name="pvarPDJson" itemSubjectRef="itemDefProcessVar_014s7ib" />
    <bpmn:dataObject id="ProcessVar_2hefpip" name="pvarPDTotalAmountPerProductJson" itemSubjectRef="itemDefProcessVar_2hefpip" />
    <bpmn:dataObject id="ProcessVar_1n38jrc" name="pvarPDSumPerProductJson" itemSubjectRef="itemDefProcessVar_1n38jrc" />
    <bpmn:startEvent id="StartEvent_1">
      <bpmn:outgoing>SequenceFlow_19po0uz</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:dataObject id="ProcessVar_3l0tkv0" name="pvarProductMAPClosingJson" itemSubjectRef="itemDefProcessVar_3l0tkv0" />
    <bpmn:sequenceFlow id="SequenceFlow_19po0uz" sourceRef="StartEvent_1" targetRef="UserTask_0fiij9d" />
    <bpmn:userTask id="UserTask_0fiij9d" name="getPurchaseDeliveryDataWithinTimeRange">
      <bpmn:incoming>SequenceFlow_19po0uz</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0vso7sa</bpmn:outgoing>
      <bpmn:ioSpecification>
        <bpmn:dataInput id="Input_09q6hln" itemSubjectRef="itemDefInput_09q6hln" name="tinStartTimestamp" />
        <bpmn:dataInput id="Input_0ksalrr" itemSubjectRef="itemDefInput_0ksalrr" name="tinEndTimestamp" />
        <bpmn:dataOutput id="Output_09n74s4" itemSubjectRef="itemDefOutput_09n74s4" name="toutPDJson" />
        <bpmn:dataOutput id="Output_0d6n7c0" itemSubjectRef="itemDefOutput_0d6n7c0" name="toutIsPDExist" />
        <bpmn:inputSet>
          <bpmn:dataInputRefs>Input_09q6hln</bpmn:dataInputRefs>
          <bpmn:dataInputRefs>Input_0ksalrr</bpmn:dataInputRefs>
        </bpmn:inputSet>
        <bpmn:outputSet>
          <bpmn:dataOutputRefs>Output_09n74s4</bpmn:dataOutputRefs>
          <bpmn:dataOutputRefs>Output_0d6n7c0</bpmn:dataOutputRefs>
        </bpmn:outputSet>
      </bpmn:ioSpecification>
      <bpmn:dataInputAssociation id="DataInputAssociation_0ombf3k">
        <bpmn:sourceRef>Input_3dvto9n</bpmn:sourceRef>
        <bpmn:targetRef>Input_09q6hln</bpmn:targetRef>
      </bpmn:dataInputAssociation>
      <bpmn:dataInputAssociation id="DataInputAssociation_1wux4ez">
        <bpmn:sourceRef>Input_034unro</bpmn:sourceRef>
        <bpmn:targetRef>Input_0ksalrr</bpmn:targetRef>
      </bpmn:dataInputAssociation>
      <bpmn:dataOutputAssociation id="DataOutputAssociation_1dg3dbg">
        <bpmn:sourceRef>Output_09n74s4</bpmn:sourceRef>
        <bpmn:targetRef>ProcessVar_014s7ib</bpmn:targetRef>
      </bpmn:dataOutputAssociation>
      <bpmn:dataOutputAssociation id="DataOutputAssociation_0p2mqs4">
        <bpmn:sourceRef>Output_0d6n7c0</bpmn:sourceRef>
        <bpmn:targetRef>ProcessVar_3aq3af4</bpmn:targetRef>
      </bpmn:dataOutputAssociation>
    </bpmn:userTask>
    <bpmn:dataObject id="ProcessVar_3aq3af4" name="pvarIsPDExist" itemSubjectRef="itemDefProcessVar_3aq3af4" />
    <bpmn:exclusiveGateway id="ExclusiveGateway_0k8u2t9" name="Check PD Exist">
      <bpmn:incoming>SequenceFlow_0vso7sa</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0vnefi0</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_1461b2s</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="SequenceFlow_0vso7sa" sourceRef="UserTask_0fiij9d" targetRef="ExclusiveGateway_0k8u2t9" />
    <bpmn:sequenceFlow id="SequenceFlow_0vnefi0" name="PD Exist" sourceRef="ExclusiveGateway_0k8u2t9" targetRef="UserTask_03ah2q0">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${pvarIsPDExist}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_1461b2s" name="PD Not Exist" sourceRef="ExclusiveGateway_0k8u2t9" targetRef="EndEvent_1uyditj">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${!pvarIsPDExist}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:userTask id="UserTask_03ah2q0" name="calculatePDTotalAmountPerProduct">
      <bpmn:incoming>SequenceFlow_0vnefi0</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0tke9ic</bpmn:outgoing>
      <bpmn:ioSpecification>
        <bpmn:dataInput id="Input_3ogv728" itemSubjectRef="itemDefInput_3ogv728" name="tinPDJson" />
        <bpmn:dataOutput id="Output_1obqshf" itemSubjectRef="itemDefOutput_1obqshf" name="toutPDTotalAmountPerProductJson" />
        <bpmn:inputSet>
          <bpmn:dataInputRefs>Input_3ogv728</bpmn:dataInputRefs>
        </bpmn:inputSet>
        <bpmn:outputSet>
          <bpmn:dataOutputRefs>Output_1obqshf</bpmn:dataOutputRefs>
        </bpmn:outputSet>
      </bpmn:ioSpecification>
      <bpmn:dataInputAssociation id="DataInputAssociation_1aoh7w5">
        <bpmn:sourceRef>ProcessVar_014s7ib</bpmn:sourceRef>
        <bpmn:targetRef>Input_3ogv728</bpmn:targetRef>
      </bpmn:dataInputAssociation>
      <bpmn:dataOutputAssociation id="DataOutputAssociation_0g9u3x3">
        <bpmn:sourceRef>Output_1obqshf</bpmn:sourceRef>
        <bpmn:targetRef>ProcessVar_2hefpip</bpmn:targetRef>
      </bpmn:dataOutputAssociation>
    </bpmn:userTask>
    <bpmn:userTask id="UserTask_06zhxaf" name="calculateProductMovingAveragePriceClosing">
      <bpmn:incoming>SequenceFlow_0dgr0ol</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1bo9l0u</bpmn:outgoing>
      <bpmn:ioSpecification>
        <bpmn:dataInput id="Input_28ppq4b" itemSubjectRef="itemDefInput_28ppq4b" name="tinPDSumPerProductJson" />
        <bpmn:dataInput id="Input_2egor5u" itemSubjectRef="itemDefInput_2egor5u" name="mapTime" />
        <bpmn:dataOutput id="Output_1rjfae3" itemSubjectRef="itemDefOutput_1rjfae3" name="toutProductMAPClosingJson" />
        <bpmn:inputSet>
          <bpmn:dataInputRefs>Input_28ppq4b</bpmn:dataInputRefs>
          <bpmn:dataInputRefs>Input_2egor5u</bpmn:dataInputRefs>
        </bpmn:inputSet>
        <bpmn:outputSet>
          <bpmn:dataOutputRefs>Output_1rjfae3</bpmn:dataOutputRefs>
        </bpmn:outputSet>
      </bpmn:ioSpecification>
      <bpmn:dataInputAssociation id="DataInputAssociation_0jk0fvb">
        <bpmn:sourceRef>ProcessVar_1n38jrc</bpmn:sourceRef>
        <bpmn:targetRef>Input_28ppq4b</bpmn:targetRef>
      </bpmn:dataInputAssociation>
      <bpmn:dataInputAssociation id="DataInputAssociation_0zmd0oo">
        <bpmn:sourceRef>Input_034unro</bpmn:sourceRef>
        <bpmn:targetRef>Input_2egor5u</bpmn:targetRef>
      </bpmn:dataInputAssociation>
      <bpmn:dataOutputAssociation id="DataOutputAssociation_1eet9cu">
        <bpmn:sourceRef>Output_1rjfae3</bpmn:sourceRef>
        <bpmn:targetRef>ProcessVar_3l0tkv0</bpmn:targetRef>
      </bpmn:dataOutputAssociation>
    </bpmn:userTask>
    <bpmn:userTask id="UserTask_1m1zrgs" name="insertProductMovingAveragePriceClosing">
      <bpmn:incoming>SequenceFlow_1bo9l0u</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_187y5y8</bpmn:outgoing>
      <bpmn:ioSpecification>
        <bpmn:dataInput id="Input_2svfrhv" itemSubjectRef="itemDefInput_2svfrhv" name="tinProductMAPClosingJson" />
        <bpmn:inputSet>
          <bpmn:dataInputRefs>Input_2svfrhv</bpmn:dataInputRefs>
        </bpmn:inputSet>
        <bpmn:outputSet />
      </bpmn:ioSpecification>
      <bpmn:dataInputAssociation id="DataInputAssociation_1ggegys">
        <bpmn:sourceRef>ProcessVar_3l0tkv0</bpmn:sourceRef>
        <bpmn:targetRef>Input_2svfrhv</bpmn:targetRef>
      </bpmn:dataInputAssociation>
    </bpmn:userTask>
    <bpmn:endEvent id="EndEvent_1uyditj">
      <bpmn:incoming>SequenceFlow_187y5y8</bpmn:incoming>
      <bpmn:incoming>SequenceFlow_1461b2s</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:userTask id="UserTask_1jgek0e" name="convertAndSumPDPerProductIntoCompanyCurrency">
      <bpmn:incoming>SequenceFlow_0tke9ic</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0dgr0ol</bpmn:outgoing>
      <bpmn:ioSpecification>
        <bpmn:dataInput id="Input_22ht2i5" itemSubjectRef="itemDefInput_22ht2i5" name="tinPDTotalAmountPerProductJson" />
        <bpmn:dataOutput id="Output_29ljbok" itemSubjectRef="itemDefOutput_29ljbok" name="toutPDSumPerProductJson" />
        <bpmn:inputSet>
          <bpmn:dataInputRefs>Input_22ht2i5</bpmn:dataInputRefs>
        </bpmn:inputSet>
        <bpmn:outputSet>
          <bpmn:dataOutputRefs>Output_29ljbok</bpmn:dataOutputRefs>
        </bpmn:outputSet>
      </bpmn:ioSpecification>
      <bpmn:dataInputAssociation id="DataInputAssociation_1bi88t1">
        <bpmn:sourceRef>ProcessVar_2hefpip</bpmn:sourceRef>
        <bpmn:targetRef>Input_22ht2i5</bpmn:targetRef>
      </bpmn:dataInputAssociation>
      <bpmn:dataOutputAssociation id="DataOutputAssociation_01d4ohs">
        <bpmn:sourceRef>Output_29ljbok</bpmn:sourceRef>
        <bpmn:targetRef>ProcessVar_1n38jrc</bpmn:targetRef>
      </bpmn:dataOutputAssociation>
    </bpmn:userTask>
    <bpmn:sequenceFlow id="SequenceFlow_0tke9ic" sourceRef="UserTask_03ah2q0" targetRef="UserTask_1jgek0e" />
    <bpmn:sequenceFlow id="SequenceFlow_0dgr0ol" sourceRef="UserTask_1jgek0e" targetRef="UserTask_06zhxaf" />
    <bpmn:sequenceFlow id="SequenceFlow_1bo9l0u" sourceRef="UserTask_06zhxaf" targetRef="UserTask_1m1zrgs" />
    <bpmn:sequenceFlow id="SequenceFlow_187y5y8" sourceRef="UserTask_1m1zrgs" targetRef="EndEvent_1uyditj" />
  </bpmn:process>
  <bpmn:itemDefinition id="itemDefInput_3dvto9n" structureRef="string" />
  <bpmn:itemDefinition id="itemDefInput_034unro" structureRef="string" />
  <bpmn:itemDefinition id="itemDefProcessVar_014s7ib" structureRef="string" />
  <bpmn:itemDefinition id="itemDefProcessVar_2hefpip" structureRef="string" />
  <bpmn:itemDefinition id="itemDefProcessVar_1n38jrc" structureRef="string" />
  <bpmn:itemDefinition id="itemDefInput_321hgvv" structureRef="string" />
  <bpmn:itemDefinition id="itemDefOutput_3g40bdi" structureRef="string" />
  <bpmn:itemDefinition id="itemDefInput_3qc70da" structureRef="string" />
  <bpmn:itemDefinition id="itemDefOutput_0k9gkks" structureRef="string" />
  <bpmn:itemDefinition id="itemDefInput_09q6hln" structureRef="string" />
  <bpmn:itemDefinition id="itemDefInput_0ksalrr" structureRef="string" />
  <bpmn:itemDefinition id="itemDefOutput_09n74s4" structureRef="string" />
  <bpmn:itemDefinition id="itemDefProcessVar_3l0tkv0" structureRef="string" />
  <bpmn:itemDefinition id="itemDefInput_2c377id" structureRef="string" />
  <bpmn:itemDefinition id="itemDefInput_0ci4b3r" structureRef="string" />
  <bpmn:itemDefinition id="itemDefInput_3ogv728" structureRef="string" />
  <bpmn:itemDefinition id="itemDefOutput_1obqshf" structureRef="string" />
  <bpmn:itemDefinition id="itemDefInput_22ht2i5" structureRef="string" />
  <bpmn:itemDefinition id="itemDefOutput_29ljbok" structureRef="string" />
  <bpmn:itemDefinition id="itemDefInput_28ppq4b" structureRef="string" />
  <bpmn:itemDefinition id="itemDefOutput_1rjfae3" structureRef="string" />
  <bpmn:itemDefinition id="itemDefInput_2svfrhv" structureRef="string" />
  <bpmn:itemDefinition id="itemDefProcessVar_3aq3af4" structureRef="boolean" />
  <bpmn:itemDefinition id="itemDefOutput_0d6n7c0" structureRef="boolean" />
  <bpmn:itemDefinition id="itemDefInput_2egor5u" structureRef="string" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_0f9a87y">
      <bpmndi:BPMNShape id="Participant_19rfnoj_di" bpmnElement="Participant_19rfnoj">
        <dc:Bounds x="123" y="49" width="1189" height="398" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1">
        <dc:Bounds x="200" y="223" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="173" y="259" width="90" height="20" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_0wj1bml_di" bpmnElement="Lane_0wj1bml">
        <dc:Bounds x="153" y="49" width="1159" height="398" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="UserTask_06zhxaf_di" bpmnElement="UserTask_06zhxaf">
        <dc:Bounds x="915" y="201" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="UserTask_1m1zrgs_di" bpmnElement="UserTask_1m1zrgs">
        <dc:Bounds x="1083" y="201" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1bo9l0u_di" bpmnElement="SequenceFlow_1bo9l0u">
        <di:waypoint xsi:type="dc:Point" x="1015" y="241" />
        <di:waypoint xsi:type="dc:Point" x="1083" y="241" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1090" y="216" width="90" height="20" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="EndEvent_1uyditj_di" bpmnElement="EndEvent_1uyditj">
        <dc:Bounds x="1248" y="223" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1221" y="259" width="90" height="20" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_187y5y8_di" bpmnElement="SequenceFlow_187y5y8">
        <di:waypoint xsi:type="dc:Point" x="1183" y="241" />
        <di:waypoint xsi:type="dc:Point" x="1248" y="241" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1169" y="216" width="90" height="20" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="UserTask_0fiij9d_di" bpmnElement="UserTask_0fiij9d">
        <dc:Bounds x="288" y="201" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_19po0uz_di" bpmnElement="SequenceFlow_19po0uz">
        <di:waypoint xsi:type="dc:Point" x="236" y="241" />
        <di:waypoint xsi:type="dc:Point" x="288" y="241" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="229.5" y="216" width="90" height="20" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="UserTask_03ah2q0_di" bpmnElement="UserTask_03ah2q0">
        <dc:Bounds x="580" y="201" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="UserTask_1jgek0e_di" bpmnElement="UserTask_1jgek0e">
        <dc:Bounds x="749" y="201" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0tke9ic_di" bpmnElement="SequenceFlow_0tke9ic">
        <di:waypoint xsi:type="dc:Point" x="680" y="241" />
        <di:waypoint xsi:type="dc:Point" x="749" y="241" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="675" y="216" width="90" height="20" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0dgr0ol_di" bpmnElement="SequenceFlow_0dgr0ol">
        <di:waypoint xsi:type="dc:Point" x="849" y="241" />
        <di:waypoint xsi:type="dc:Point" x="915" y="241" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="837" y="216" width="90" height="20" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ExclusiveGateway_0k8u2t9_di" bpmnElement="ExclusiveGateway_0k8u2t9" isMarkerVisible="true">
        <dc:Bounds x="456" y="216" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="436" y="188" width="90" height="20" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0vso7sa_di" bpmnElement="SequenceFlow_0vso7sa">
        <di:waypoint xsi:type="dc:Point" x="388" y="241" />
        <di:waypoint xsi:type="dc:Point" x="456" y="241" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="377" y="216" width="90" height="20" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0vnefi0_di" bpmnElement="SequenceFlow_0vnefi0">
        <di:waypoint xsi:type="dc:Point" x="506" y="241" />
        <di:waypoint xsi:type="dc:Point" x="580" y="241" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="497" y="216" width="90" height="20" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1461b2s_di" bpmnElement="SequenceFlow_1461b2s">
        <di:waypoint xsi:type="dc:Point" x="481" y="266" />
        <di:waypoint xsi:type="dc:Point" x="481" y="336" />
        <di:waypoint xsi:type="dc:Point" x="1266" y="336" />
        <di:waypoint xsi:type="dc:Point" x="1266" y="259" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="822.5" y="311" width="90" height="20" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
